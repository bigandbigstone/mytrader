# 算法1伪代码
# 作者 SongLinshuo
def 模拟订单流生成算法(前一tick, 当前tick):
    # 步骤1 对买一价的处理
    if 买一价未发送变化:
        if 买一量减小:
            生成模拟交易指令("撮合", "买单", 买一价, 买一量变化)
        elif 买一量增大:
            生成模拟交易指令("新增", "买单", 买一价, 买一量变化)
    elif 买一价减小:
        # 对现买一价及其前的买一价(不包括)之间的价位处理
        for 现买一价到前买一价(不包括)
            生成模拟交易指令("撮合", "买单", 价位, 价位容量)
        # 对当前买一价的处理
        if 当前价位存在于前一tick:
            if 买一量减小:
                生成模拟交易指令("撮合", "买单", 买一价, 买一量变化)
            elif 买一量增大:
                生成模拟交易指令("新增", "买单", 买一价, 买一量变化)
        else:
            生成模拟交易指令("新增", "买单", 买一价, 买一价容量)
    else 买一价增大:
        # 对前买一价(不包括)到现在的买一价之间的价位处理
        for 前买一价(不包括)到现买一价:
            生成模拟交易指令("新增", "买单", 价位, 价位容量)
    
    # 步骤2 更新非最优价买量
    for 现非最优买价:
        if 当前价位存在于前一tick:
            if 买量减小:
                生成模拟交易指令("撮合", "买单", 买价, 买量变化)
            elif 买量增大:
                生成模拟交易指令("新增", "买单", 买价, 买量变化)
        else:
            生成模拟交易指令("新增", "买单", 买价, 买价容量)

    # 对卖价的处理与买价一致，不再赘述
    # 步骤3 对卖一价的处理
    # 步骤4 更新非最优价卖量